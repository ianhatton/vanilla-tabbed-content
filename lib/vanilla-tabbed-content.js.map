{"version":3,"sources":["../src/vanilla-tabbed-content.js"],"names":["_","require","includes","urlParserClass","urlParser","TabbedContentClass","config","init","defaults","bodyContainerClass","navContainerClass","tabContainerClass","_init","navItems","tabs","navContainer","element","querySelector","_render","anchor","getHash","_setTabbedContentId","_getNavItems","_getTabs","_setActiveTab","_simulateNavItemClick","forEach","navItem","addEventListener","_navItemClick","bind","Array","from","getElementsByTagName","_setNavItemAriaControls","_addNavItemClickListeners","querySelectorAll","_setTabIds","e","preventDefault","activeIndex","indexOf","_setNavItemAriaSelected","_setNavItemClass","_setTabAriaHidden","_setTabClass","href","i","getAttribute","setAttribute","id","substring","className","replace","tab","uniqueId","ariaControls","isEmpty","window","location","hash","module","exports"],"mappings":";;;;;;AAAA;AACA,IAAMA,IAAIC,QAAQ,aAAR,CAAV;AACAD,EAAEE,QAAF,GAAaD,QAAQ,iBAAR,CAAb;;AAEA,IAAME,iBAAiBF,QAAQ,oBAAR,CAAvB;AACA,IAAMG,YAAY,IAAID,cAAJ,EAAlB;;IAEME,kB;AACJ,gCAAqC;AAAA,QAAzBC,MAAyB,uEAAhB,EAAgB;AAAA,QAAZC,IAAY,uEAAL,IAAK;;AAAA;;AACnC,SAAKD,MAAL,GAAcN,EAAEQ,QAAF,CAAWF,MAAX,EACZ,EAACG,oBAAoB,qBAArB;AACEC,yBAAmB,oBADrB;AAEEC,yBAAmB,oBAFrB,EADY,CAAd;;AAMA,QAAIJ,IAAJ,EAAS;AACP,WAAKK,KAAL;AACD;AACF;;;;4BAEM;AACL,WAAKC,QAAL,GAAgB,EAAhB;AACA,WAAKC,IAAL,GAAY,EAAZ;AACA,WAAKC,YAAL,GAAoB,KAAKT,MAAL,CAAYU,OAAZ,CAAoBC,aAApB,CAAkC,MAAM,KAAKX,MAAL,CAAYI,iBAApD,CAApB;AACA,WAAKQ,OAAL;AACD;;;8BAEQ;AACP,UAAMC,SAASf,UAAUgB,OAAV,EAAf;;AAEA,WAAKC,mBAAL;AACA,WAAKC,YAAL;AACA,WAAKC,QAAL;AACA,WAAKC,aAAL,CAAmB,KAAKX,QAAL,CAAc,CAAd,CAAnB;AACA,WAAKY,qBAAL,CAA2BN,MAA3B;AACD;;;gDAE0B;AAAA;;AACzB,WAAKN,QAAL,CAAca,OAAd,CAAsB,UAACC,OAAD,EAAW;AAC/BA,gBAAQC,gBAAR,CAAyB,OAAzB,EAAkC,MAAKC,aAAL,CAAmBC,IAAnB,QAA8BH,OAA9B,CAAlC,EAA0E,KAA1E;AACD,OAFD;AAGD;;;mCAEa;AACZ,WAAKd,QAAL,GAAgBkB,MAAMC,IAAN,CAAW,KAAKjB,YAAL,CAAkBkB,oBAAlB,CAAuC,GAAvC,CAAX,CAAhB;;AAEA,WAAKC,uBAAL;AACA,WAAKC,yBAAL;AACD;;;+BAES;AACR,WAAKrB,IAAL,GAAYiB,MAAMC,IAAN,CAAW,KAAK1B,MAAL,CAAYU,OAAZ,CAAoBoB,gBAApB,OAAyC,KAAK9B,MAAL,CAAYK,iBAArD,CAAX,CAAZ;;AAEA,WAAK0B,UAAL;AACD;;;kCAEaV,O,EAASW,C,EAAE;AACvBA,QAAEC,cAAF;;AAEA,WAAKf,aAAL,CAAmBG,OAAnB;AACD;;;kCAEaA,O,EAAQ;AACpB,UAAMa,cAAcxC,EAAEyC,OAAF,CAAU,KAAK5B,QAAf,EAAyBc,OAAzB,CAApB;;AAEA,WAAKe,uBAAL,CAA6BF,WAA7B;AACA,WAAKG,gBAAL,CAAsBH,WAAtB;AACA,WAAKI,iBAAL,CAAuBJ,WAAvB;AACA,WAAKK,YAAL,CAAkBL,WAAlB;AACD;;;8CAEwB;AAAA;;AACvB,UAAIM,aAAJ;;AAEA,WAAKjC,QAAL,CAAca,OAAd,CAAsB,UAACC,OAAD,EAAUoB,CAAV,EAAc;AAClCD,eAAOnB,QAAQqB,YAAR,CAAqB,MAArB,CAAP;;AAEA,YAAIF,SAAS,GAAb,EAAiB;AACfnB,kBAAQsB,YAAR,CAAqB,eAArB,EAAyC,OAAK3C,MAAL,CAAYU,OAAZ,CAAoBkC,EAA7D,aAAuEH,CAAvE;AACD,SAFD,MAEO;AACLpB,kBAAQsB,YAAR,CAAqB,eAArB,EAAsCH,KAAKK,SAAL,CAAe,CAAf,CAAtC;AACD;AACF,OARD;AASD;;;4CAEuBX,W,EAAY;AAClC,WAAK3B,QAAL,CAAca,OAAd,CAAsB,UAACC,OAAD,EAAW;AAC/BA,gBAAQsB,YAAR,CAAqB,eAArB,EAAsC,OAAtC;AACD,OAFD;;AAIA,WAAKpC,QAAL,CAAc2B,WAAd,EAA2BS,YAA3B,CAAwC,eAAxC,EAAyD,MAAzD;AACD;;;qCAEgBT,W,EAAY;AAC3B,UAAIY,kBAAJ;;AAEA,WAAKvC,QAAL,CAAca,OAAd,CAAsB,UAACC,OAAD,EAAW;AAC/ByB,oBAAYzB,QAAQyB,SAApB;;AAEAzB,gBAAQyB,SAAR,GAAoBA,UAAUC,OAAV,CAAkB,uBAAlB,EAA2C,EAA3C,CAApB;AACD,OAJD;;AAMA,WAAKxC,QAAL,CAAc2B,WAAd,EAA2BY,SAA3B,IAAwC,SAAxC;AACD;;;sCAEiBZ,W,EAAY;AAC5B,WAAK1B,IAAL,CAAUY,OAAV,CAAkB,UAAC4B,GAAD,EAAO;AACvBA,YAAIL,YAAJ,CAAiB,aAAjB,EAAgC,MAAhC;AACD,OAFD;;AAIA,WAAKnC,IAAL,CAAU0B,WAAV,EAAuBS,YAAvB,CAAoC,aAApC,EAAmD,OAAnD;AACD;;;0CAEoB;AACnB,WAAK3C,MAAL,CAAYU,OAAZ,CAAoBkC,EAApB,GAAyBlD,EAAEuD,QAAF,CAAW,iBAAX,CAAzB;AACD;;;iCAEYf,W,EAAY;AACvB,UAAIY,kBAAJ;;AAEA,WAAKtC,IAAL,CAAUY,OAAV,CAAkB,UAAC4B,GAAD,EAAO;AACvBF,oBAAYE,IAAIF,SAAhB;;AAEAE,YAAIF,SAAJ,GAAgBA,UAAUC,OAAV,CAAkB,uBAAlB,EAA2C,EAA3C,CAAhB;AACD,OAJD;;AAMA,WAAKvC,IAAL,CAAU0B,WAAV,EAAuBY,SAAvB,IAAoC,SAApC;AACD;;;iCAEW;AAAA;;AACV,UAAIN,aAAJ;;AAEA,WAAKhC,IAAL,CAAUY,OAAV,CAAkB,UAAC4B,GAAD,EAAMP,CAAN,EAAU;AAC1BD,eAAO,OAAKjC,QAAL,CAAckC,CAAd,EAAiBC,YAAjB,CAA8B,MAA9B,CAAP;;AAEA,YAAIF,SAAS,GAAb,EAAiB;AACf,cAAIU,eAAe,OAAK3C,QAAL,CAAckC,CAAd,EAAiBC,YAAjB,CAA8B,eAA9B,CAAnB;AACAM,cAAIJ,EAAJ,GAASM,YAAT;AACD;AACF,OAPD;AAQD;;;0CAEqBrC,M,EAAO;AAAA;;AAC3B,UAAI,CAACnB,EAAEyD,OAAF,CAAUtC,MAAV,CAAL,EAAuB;AACrB,aAAKN,QAAL,CAAca,OAAd,CAAsB,UAACC,OAAD,EAAW;AAC/B,cAAImB,OAAOnB,QAAQqB,YAAR,CAAqB,MAArB,CAAX;;AAEA,cAAIhD,EAAEE,QAAF,CAAW4C,IAAX,EAAiB3B,MAAjB,CAAJ,EAA6B;AAC3B,mBAAKK,aAAL,CAAmBG,OAAnB;;AAEA+B,mBAAOC,QAAP,CAAgBC,IAAhB,GAAuBzC,MAAvB;AACD;AACF,SARD;AASD;AACF;;;;;;AAGH0C,OAAOC,OAAP,GAAiBzD,kBAAjB;AACA","file":"vanilla-tabbed-content.js","sourcesContent":["/* eslint-disable max-len */\nconst _ = require('lodash/core');\n_.includes = require('lodash/includes');\n\nconst urlParserClass = require('@djforth/urlparser');\nconst urlParser = new urlParserClass();\n\nclass TabbedContentClass{\n  constructor(config = {}, init = true){\n    this.config = _.defaults(config,\n      {bodyContainerClass: 'tabbed-content-body'\n      , navContainerClass: 'tabbed-content-nav'\n      , tabContainerClass: 'tabbed-content-tab'}\n    );\n\n    if (init){\n      this._init();\n    }\n  }\n\n  _init(){\n    this.navItems = [];\n    this.tabs = [];\n    this.navContainer = this.config.element.querySelector('.' + this.config.navContainerClass);\n    this._render();\n  }\n\n  _render(){\n    const anchor = urlParser.getHash();\n\n    this._setTabbedContentId();\n    this._getNavItems();\n    this._getTabs();\n    this._setActiveTab(this.navItems[0]);\n    this._simulateNavItemClick(anchor);\n  }\n\n  _addNavItemClickListeners(){\n    this.navItems.forEach((navItem)=>{\n      navItem.addEventListener('click', this._navItemClick.bind(this, navItem), false);\n    });\n  }\n\n  _getNavItems(){\n    this.navItems = Array.from(this.navContainer.getElementsByTagName('a'));\n\n    this._setNavItemAriaControls();\n    this._addNavItemClickListeners();\n  }\n\n  _getTabs(){\n    this.tabs = Array.from(this.config.element.querySelectorAll(`.${this.config.tabContainerClass}`));\n\n    this._setTabIds();\n  }\n\n  _navItemClick(navItem, e){\n    e.preventDefault();\n\n    this._setActiveTab(navItem);\n  }\n\n  _setActiveTab(navItem){\n    const activeIndex = _.indexOf(this.navItems, navItem);\n\n    this._setNavItemAriaSelected(activeIndex);\n    this._setNavItemClass(activeIndex);\n    this._setTabAriaHidden(activeIndex);\n    this._setTabClass(activeIndex);\n  }\n\n  _setNavItemAriaControls(){\n    let href;\n\n    this.navItems.forEach((navItem, i)=>{\n      href = navItem.getAttribute('href');\n\n      if (href === '#'){\n        navItem.setAttribute('aria-controls', `${this.config.element.id}-tab-${i}`);\n      } else {\n        navItem.setAttribute('aria-controls', href.substring(1));\n      }\n    });\n  }\n\n  _setNavItemAriaSelected(activeIndex){\n    this.navItems.forEach((navItem)=>{\n      navItem.setAttribute('aria-selected', 'false');\n    });\n\n    this.navItems[activeIndex].setAttribute('aria-selected', 'true');\n  }\n\n  _setNavItemClass(activeIndex){\n    let className;\n\n    this.navItems.forEach((navItem)=>{\n      className = navItem.className;\n\n      navItem.className = className.replace(/(?:^|\\s)active(?!\\S)/g, '');\n    });\n\n    this.navItems[activeIndex].className += ' active';\n  }\n\n  _setTabAriaHidden(activeIndex){\n    this.tabs.forEach((tab)=>{\n      tab.setAttribute('aria-hidden', 'true');\n    });\n\n    this.tabs[activeIndex].setAttribute('aria-hidden', 'false');\n  }\n\n  _setTabbedContentId(){\n    this.config.element.id = _.uniqueId('tabbed-content-');\n  }\n\n  _setTabClass(activeIndex){\n    let className;\n\n    this.tabs.forEach((tab)=>{\n      className = tab.className;\n\n      tab.className = className.replace(/(?:^|\\s)active(?!\\S)/g, '');\n    });\n\n    this.tabs[activeIndex].className += ' active';\n  }\n\n  _setTabIds(){\n    let href;\n\n    this.tabs.forEach((tab, i)=>{\n      href = this.navItems[i].getAttribute('href');\n\n      if (href === '#'){\n        let ariaControls = this.navItems[i].getAttribute('aria-controls');\n        tab.id = ariaControls;\n      }\n    });\n  }\n\n  _simulateNavItemClick(anchor){\n    if (!_.isEmpty(anchor)){\n      this.navItems.forEach((navItem)=>{\n        let href = navItem.getAttribute('href');\n\n        if (_.includes(href, anchor)){\n          this._setActiveTab(navItem);\n\n          window.location.hash = anchor;\n        }\n      });\n    }\n  }\n}\n\nmodule.exports = TabbedContentClass;\n/* eslint-enable */\n"]}