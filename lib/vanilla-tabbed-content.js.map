{"version":3,"sources":["../src/vanilla-tabbed-content.js"],"names":[],"mappings":"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","file":"vanilla-tabbed-content.js","sourcesContent":["const _ = require('lodash/core');\n_.includes = require('lodash/includes');\n\nconst urlParserClass = require('@djforth/urlparser');\nconst urlParser = new urlParserClass();\n\nclass TabbedContentClass{\n  constructor(config = {}, init = true){\n    this.config = _.defaults(config,\n      {bodyContainerClass: 'tabbed-content-body'\n      , navContainerClass: 'tabbed-content-nav'\n      , tabContainerClass: 'tabbed-content-tab'}\n    );\n\n    if (init){\n      this._init();\n    }\n  }\n\n  _init(){\n    this.navItems = [];\n    this.tabs = [];\n    /* eslint-disable max-len */\n    this.navContainer = this.config.element.querySelector('.' + this.config.navContainerClass);\n    /* eslint-enable */\n    this._render();\n  }\n\n  _render(){\n    let anchor = urlParser.getHash();\n\n    this._getNavItems();\n    this._getTabs();\n    this._setActiveTab(this.navItems[0]);\n    this._simulateNavItemClick(anchor);\n  }\n\n  _addNavItemClickListeners(){\n    _.forEach(this.navItems, function(navItem){\n      /* eslint-disable max-len */\n      navItem.addEventListener('click', this._navItemClick.bind(this, navItem), false);\n      /* eslint-enable */\n    }.bind(this));\n  }\n\n  _getNavItems(){\n    this.navItems = this.navContainer.getElementsByTagName('a');\n\n    this._setNavItemAriaControls();\n    this._addNavItemClickListeners();\n  }\n\n  _getTabs(){\n    /* eslint-disable max-len */\n    this.tabs = this.config.element.querySelectorAll('.' + this.config.tabContainerClass);\n    /* eslint-enable */\n\n    this._setTabIds();\n  }\n\n  _navItemClick(navItem, e){\n    e.preventDefault();\n\n    this._setActiveTab(navItem);\n  }\n\n  _setActiveTab(navItem){\n    let activeIndex = _.indexOf(this.navItems, navItem);\n\n    this._setNavItemAriaSelected(activeIndex);\n    this._setNavItemClass(activeIndex);\n    this._setTabAriaHidden(activeIndex);\n    this._setTabClass(activeIndex);\n  }\n\n  _setNavItemAriaControls(){\n    let href;\n\n    _.forEach(this.navItems, function(navItem, i){\n      href = navItem.getAttribute('href');\n\n      if (href === '#'){\n        navItem.setAttribute('aria-controls', 'tab-' + i);\n      } else {\n        navItem.setAttribute('aria-controls', href.substring(1));\n      }\n    });\n  }\n\n  _setNavItemAriaSelected(activeIndex){\n    _.forEach(this.navItems, (navItem)=>{\n      navItem.setAttribute('aria-selected', 'false');\n    });\n\n    this.navItems[activeIndex].setAttribute('aria-selected', 'true');\n  }\n\n  _setNavItemClass(activeIndex){\n    _.forEach(this.navItems, (navItem)=>{\n      let className = navItem.className;\n\n      navItem.className = className.replace(/(?:^|\\s)active(?!\\S)/g, '');\n    });\n\n    this.navItems[activeIndex].className += ' active';\n  }\n\n  _setTabAriaHidden(activeIndex){\n    _.forEach(this.tabs, (tab)=>{\n      tab.setAttribute('aria-hidden', 'true');\n    });\n\n    this.tabs[activeIndex].setAttribute('aria-hidden', 'false');\n  }\n\n  _setTabClass(activeIndex){\n    _.forEach(this.tabs, (tab)=>{\n      let className = tab.className;\n\n      tab.className = className.replace(/(?:^|\\s)active(?!\\S)/g, '');\n    });\n\n    this.tabs[activeIndex].className += ' active';\n  }\n\n  _setTabIds(){\n    let href;\n\n    _.forEach(this.tabs, function(tabContentItem, i){\n      href = this.navItems[i].getAttribute('href');\n\n      if (href === '#'){\n        let ariaControls = this.navItems[i].getAttribute('aria-controls');\n        tabContentItem.id = ariaControls;\n      }\n    }.bind(this));\n  }\n\n  _simulateNavItemClick(anchor){\n    if (!_.isEmpty(anchor)){\n      _.forEach(this.navItems, function(navItem){\n        let href = navItem.getAttribute('href');\n\n        if (_.includes(href, anchor)){\n          this._setActiveTab(navItem);\n          window.location.hash = anchor;\n        }\n      }.bind(this));\n    }\n  }\n}\n\nmodule.exports = TabbedContentClass;\n"]}